<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Åsvang IT - Programvareutvikling & IT-infrastruktur</title>
    <link rel="icon" type="image/x-icon" href="static/logo/favicon.ico">
    <link rel="stylesheet" href="static/css/style.css">

    
    <!-- Google Analytics - Loads only with consent -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        
        function initializeAnalytics() {
            const script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-5BSP45RSLM';
            document.head.appendChild(script);
            
            gtag('js', new Date());
            gtag('config', 'G-5BSP45RSLM', {
                anonymize_ip: true
            });
        }

        // GDPR Consent Management
        class GDPRConsent {
            constructor() {
                this.consentKey = 'gdpr-consent';
                this.consentData = this.getStoredConsent();
                this.init();
            }

            init() {
                document.addEventListener('DOMContentLoaded', () => {
                    this.setupEventListeners();
                    this.checkConsentStatus();
                });
            }

            getStoredConsent() {
                try {
                    const stored = localStorage.getItem(this.consentKey);
                    return stored ? JSON.parse(stored) : null;
                } catch (e) {
                    return null;
                }
            }

            saveConsent(data) {
                try {
                    localStorage.setItem(this.consentKey, JSON.stringify(data));
                    this.consentData = data;
                } catch (e) {
                    console.warn('Could not save GDPR consent preferences');
                }
            }

            checkConsentStatus() {
                if (!this.consentData || !this.consentData.timestamp) {
                    this.showBanner();
                } else {
                    // Check if consent is older than 13 months (GDPR requirement)
                    const consentAge = Date.now() - this.consentData.timestamp;
                    const thirteenMonths = 13 * 30 * 24 * 60 * 60 * 1000;
                    
                    if (consentAge > thirteenMonths) {
                        this.showBanner();
                    } else if (this.consentData.analytics) {
                        this.enableAnalytics();
                    }
                }
            }

            showBanner() {
                const banner = document.getElementById('gdpr-banner');
                if (banner) {
                    banner.style.display = 'block';
                }
            }

            hideBanner() {
                const banner = document.getElementById('gdpr-banner');
                if (banner) {
                    banner.style.display = 'none';
                }
            }

            enableAnalytics() {
                if (typeof initializeAnalytics === 'function') {
                    initializeAnalytics();
                }
            }

            setupEventListeners() {
                // Accept all button
                const acceptBtn = document.getElementById('gdpr-accept');
                if (acceptBtn) {
                    acceptBtn.addEventListener('click', () => {
                        this.handleAcceptAll();
                    });
                }

                // Decline all button
                const declineBtn = document.getElementById('gdpr-decline');
                if (declineBtn) {
                    declineBtn.addEventListener('click', () => {
                        this.handleDeclineAll();
                    });
                }

                // Settings button
                const settingsBtn = document.getElementById('gdpr-settings');
                if (settingsBtn) {
                    settingsBtn.addEventListener('click', () => {
                        this.showModal();
                    });
                }

                // Modal close button
                const closeBtn = document.getElementById('gdpr-modal-close');
                if (closeBtn) {
                    closeBtn.addEventListener('click', () => {
                        this.hideModal();
                    });
                }

                // Save settings button
                const saveBtn = document.getElementById('gdpr-save-settings');
                if (saveBtn) {
                    saveBtn.addEventListener('click', () => {
                        this.handleSaveSettings();
                    });
                }

                // Click outside modal to close
                const modal = document.getElementById('gdpr-modal');
                if (modal) {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            this.hideModal();
                        }
                    });
                }

                // Privacy settings link in footer
                const privacyLink = document.getElementById('privacy-settings-link-footer');
                if (privacyLink) {
                    privacyLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.showModal();
                    });
                }
            }

            handleAcceptAll() {
                const consent = {
                    timestamp: Date.now(),
                    analytics: true,
                    necessary: true
                };
                
                this.saveConsent(consent);
                this.enableAnalytics();
                this.hideBanner();
            }

            handleDeclineAll() {
                const consent = {
                    timestamp: Date.now(),
                    analytics: false,
                    necessary: true
                };
                
                this.saveConsent(consent);
                this.hideBanner();
            }

            handleSaveSettings() {
                const analyticsToggle = document.getElementById('analytics-toggle');
                const analyticsEnabled = analyticsToggle ? analyticsToggle.checked : false;
                
                const consent = {
                    timestamp: Date.now(),
                    analytics: analyticsEnabled,
                    necessary: true
                };
                
                this.saveConsent(consent);
                
                if (analyticsEnabled) {
                    this.enableAnalytics();
                }
                
                this.hideModal();
                this.hideBanner();
            }

            showModal() {
                const modal = document.getElementById('gdpr-modal');
                const analyticsToggle = document.getElementById('analytics-toggle');
                
                // Set current consent state in modal
                if (analyticsToggle && this.consentData) {
                    analyticsToggle.checked = this.consentData.analytics || false;
                }
                
                if (modal) {
                    modal.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            hideModal() {
                const modal = document.getElementById('gdpr-modal');
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = '';
                }
            }
        }

        // Initialize GDPR consent system
        const gdprConsent = new GDPRConsent();
        
        // Make GDPR methods globally accessible for manual consent management
        window.GDPRManager = {
            showSettings: () => gdprConsent.showModal(),
            resetConsent: () => {
                localStorage.removeItem('gdpr-consent');
                location.reload();
            },
            getConsentStatus: () => gdprConsent.consentData
        };
    </script>

</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="static/logo/logo-white.svg" alt="Åsvang IT" class="logo-image">
            <span class="logo-text">Åsvang IT</span>
        </div>
    </header>

    <main class="hero">
        <h1 class="hero-title">
            <span class="highlight">Rådgivning, systemutvikling og Microsoft 365</span> – på ett sted
        </h1>
        <h2 class="hero-subtitle">Vi hjelper små og mellomstore bedrifter å ta bedre teknologivalg, bygge riktige løsninger og drifte Microsoft 365 trygt.</h2>
        <div class="hero-actions">
            <a href="https://outlook.office.com/bookwithme/user/6e1d9fdc07544af9987010937697cf4f@asvang.no/meetingtype/G35nYt1L5EuvrjnJBrMdow2?anonymous&ismsaljsauthenabled&ep=mLinkFromTile" class="cta-button primary" target="_blank" rel="noopener noreferrer">Book 15 min prat</a>
            <a href="#tilbud" class="cta-button secondary">Se tilbud</a>
        </div>
    </main>

    <section id="tilbud" class="offers">
        <div class="offers-container">
            <h2 class="offers-title">Våre tilbud</h2>
            <div class="offers-grid">
                <div class="offer-card">
                    <div class="offer-icon">💰</div>
                    <h3 class="offer-title">Gratis kostoptimalisering</h3>
                    <p class="offer-description">Vi hjelper deg å identifisere muligheter for å redusere kostnadene i din Microsoft 365-infrastruktur uten å kompromittere funksjonalitet eller sikkerhet.</p>
                    <div class="offer-features">
                        <div class="feature">Lisens-gjennomgang</div>
                        <div class="feature">Kostnadsanalyse</div>
                        <div class="feature">Besparingsforslag</div>
                    </div>
                </div>
                <div class="offer-card">
                    <div class="offer-icon">🔍</div>
                    <h3 class="offer-title">Gratis helsesjekk</h3>
                    <p class="offer-description">En grundig gjennomgang av din Microsoft 365-infrastruktur for å identifisere sikkerhetshull, ytelsesproblemer og optimaliseringsmuligheter.</p>
                    <div class="offer-features">
                        <div class="feature">Sikkerhetsgjennomgang</div>
                        <div class="feature">Ytelsesanalyse</div>
                        <div class="feature">Anbefalinger</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">

        <div class="footer-container">

            <div class="footer-content">

                <div class="footer-section">
                    <h3 class="footer-title">Åsvang IT</h3>
                    <p class="footer-description">Din partner for rådgivning, systemutvikling og Microsoft 365-tjenester. Vi hjelper små og mellomstore bedrifter med å ta bedre teknologivalg.</p>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Kontakt oss</h4>

                    <div class="footer-contact">
                        <div class="contact-item">
                            <span class="contact-icon">📍</span>
                            <span>Eventyrveien 18, 1827 Hobøl</span>
                        </div>
                        <div class="contact-item">
                            <span class="contact-icon">📞</span>
                            <span>+47 48 36 51 56</span>
                        </div>
                        <div class="contact-item">
                            <span class="contact-icon">✉️</span>
                            <span>post@asvang-it.no</span>
                        </div>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Tjenester</h4>
                    <ul class="footer-links">
                        <li><a href="#tilbud">Våre tilbud</a></li>
                        <li><a href="#">IT-rådgivning</a></li>
                        <li><a href="#">Systemutvikling</a></li>
                        <li><a href="#">Microsoft 365</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Personverninnstillinger</h4>
                    <ul class="footer-links">
                        <li><a href="#" id="privacy-settings-link-footer">Endre samtykke</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="copyright">© 2025 Åsvang IT. Alle rettigheter forbeholdt.</p>
            </div>
        </div>
    </footer>

    <!-- GDPR Consent Banner -->
    <div id="gdpr-banner" class="gdpr-banner" style="display: none;">
        <div class="gdpr-content">
            <div class="gdpr-text">
                <h3>Vi respekterer ditt personvern</h3>
                <p>Vi bruker Google Analytics for å forbedre vår nettside. Dette innebærer lagring av informasjonskapsler og behandling av personopplysninger. Du kan når som helst endre dine innstillinger via "Personverninnstillinger" i bunnteksten.</p>
            </div>
            <div class="gdpr-actions">
                <button id="gdpr-accept" class="gdpr-btn gdpr-accept">Godta alle</button>
                <button id="gdpr-decline" class="gdpr-btn gdpr-decline">Avvis alle</button>
                <button id="gdpr-settings" class="gdpr-btn gdpr-settings">Innstillinger</button>
            </div>
        </div>
    </div>

    <!-- GDPR Settings Modal -->
    <div id="gdpr-modal" class="gdpr-modal" style="display: none;">
        <div class="gdpr-modal-content">
            <div class="gdpr-modal-header">
                <h3>Personverninnstillinger</h3>
                <button id="gdpr-modal-close" class="gdpr-close">&times;</button>
            </div>
            <div class="gdpr-modal-body">
                <div class="gdpr-category">
                    <h4>Nødvendige informasjonskapsler</h4>
                    <p>Disse er nødvendige for at nettstedet skal fungere og kan ikke deaktiveres.</p>
                    <label class="gdpr-toggle">
                        <input type="checkbox" checked disabled>
                        <span class="gdpr-slider"></span>
                        <span>Alltid aktivert</span>
                    </label>
                </div>
                <div class="gdpr-category">
                    <h4>Analyse og statistikk</h4>
                    <p>Google Analytics hjelper oss å forstå hvordan du bruker nettstedet vårt for å forbedre brukeropplevelsen.</p>
                    <label class="gdpr-toggle">
                        <input type="checkbox" id="analytics-toggle">
                        <span class="gdpr-slider"></span>
                        <span>Google Analytics</span>
                    </label>
                </div>
            </div>
            <div class="gdpr-modal-footer">
                <button id="gdpr-save-settings" class="gdpr-btn gdpr-accept">Lagre innstillinger</button>
            </div>
        </div>
    </div>

</body>
</html>
